function getUpcoming(){var i=rootURL+"/movie/upcoming?api_key="+apiKey;$.ajax({url:i,type:"get",dataType:"json",success:function(i){$(document).trigger("upcomingSuccess",i)},error:function(i){$(document).trigger("upcomingError",i)}})}function hideLoader(){$("#loader").animate({opacity:"0"},1e3,function(){$(this).css("visibility","hidden")})}function nextMovie(){$("#MoviesList .movie:first-child").animate({"margin-left":"-5%"},800,function(){$(this).css("margin-left","").appendTo("#MoviesList");var i=$("#MoviesList .movie:first-child").data("position");$("#tabs li").removeClass("current"),$('#tabs li[data-position="'+i+'"]').addClass("current")})}function prevMovie(){$("#MoviesList .movie:last-child").css("margin-left","-5%").prependTo("#MoviesList");var i=$("#MoviesList .movie:first-child").data("position");$("#MoviesList .movie:first-child").animate({"margin-left":"0"},800),$("#tabs li").removeClass("current"),$('#tabs li[data-position="'+i+'"]').addClass("current")}function goToMovie(i){var t=$("#tabs li.current").data("position"),s=i-t;0>s?($("#MoviesList .movie[data-position='"+i+"']").css("margin-left","-5%").insertBefore($("#MoviesList .movie:first-child")),$("#MoviesList .movie:first-child").animate({"margin-left":"0%"},800,function(){for(var i=0;-s>i;i++)$("#MoviesList .movie[data-position='"+(t-i)+"']").css("margin-left","").insertAfter($("#MoviesList .movie:first-child"));var o=$("#MoviesList .movie:first-child").data("position");$("#tabs li").removeClass("current"),$('#tabs li[data-position="'+o+'"]').addClass("current")})):s>0&&($("#MoviesList .movie[data-position='"+i+"']").insertAfter($("#MoviesList .movie:first-child")),$("#MoviesList .movie:first-child").animate({"margin-left":"-5%"},800,function(){for(var i=0;s>i;i++)$("#MoviesList .movie[data-position='"+(t+i)+"']").css("margin-left","").appendTo("#MoviesList");var o=$("#MoviesList .movie:first-child").data("position");$("#tabs li").removeClass("current"),$('#tabs li[data-position="'+o+'"]').addClass("current")}))}var rootURL="https://api.themoviedb.org/3",apiKey="29b4f290e3fdf9c7612586ac8b9fe9ff";$(document).ready(function(){getUpcoming(),$("#prevButton").on("click",function(){prevMovie()}),$("#nextButton").on("click",function(){nextMovie()}),$(document).on("upcomingSuccess",function(i,t){for(var s=0;s<t.results.length;s++){var o="<li class='movie' data-position='"+s+"'>",e=t.results[s].backdrop_path;null==e?(e="http://via.placeholder.com/1280x720/444444/?text=+",o+="<img class='backdrop' src='"+e+"'>"):o+="<img class='backdrop' src='https://image.tmdb.org/t/p/w1280"+e+"'>";var a=t.results[s].poster_path;null==a?(a="http://via.placeholder.com/500x750?text=image+manquante",o+="<img class='poster' src='"+a+"'>"):o+="<img class='poster' src='https://image.tmdb.org/t/p/w500"+a+"'>",o+="<div class='textContent'>",o+="<h2 class='title'>"+t.results[s].title+"</h2>",o+="<p class='overview'>"+t.results[s].overview+"</p>";var n=Math.round(t.results[s].vote_average);o+="<ul class='score'>";for(var r=1;11>r;r++)o+=n>=r?"<li class='gold'><svg viewBox='0 0 76 73' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g id='' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g id='' fill='#F8E81C'><path d='M72.3,24.5 L51.1,21.4 L41.6,2.2 C40.9,0.8 39.5,0 38,0 C36.5,0 35.1,0.9 34.4,2.2 L24.9,21.4 L3.7,24.5 C2.2,24.7 0.9,25.8 0.5,27.2 C0.1,28.6 0.4,30.2 1.5,31.3 L16.9,46.3 L13.3,67.4 C13,68.9 13.7,70.4 14.9,71.3 C16.1,72.2 17.8,72.3 19.1,71.6 L38.1,61.6 L57.1,71.6 C57.7,71.9 58.3,72.1 59,72.1 C59.8,72.1 60.7,71.8 61.4,71.3 C62.6,70.4 63.2,68.9 63,67.4 L59.4,46.3 L74.8,31.3 C75.9,30.2 76.3,28.6 75.8,27.2 C75,25.7 73.8,24.7 72.3,24.5 Z' id=''></path></g></g></svg></li>":"<li><svg viewBox='0 0 76 73' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g id='' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g id='' fill='#FFFFFF'><path d='M75.5,27.2 C75,25.8 73.8,24.7 72.3,24.5 L51.1,21.4 L41.6,2.2 C40.9,0.8 39.5,0 38,0 C36.5,0 35.1,0.9 34.4,2.2 L24.9,21.4 L3.7,24.5 C2.2,24.7 0.9,25.8 0.5,27.2 C0.1,28.6 0.4,30.2 1.5,31.3 L16.9,46.3 L13.3,67.4 C13,68.9 13.7,70.4 14.9,71.3 C16.1,72.2 17.8,72.3 19.1,71.6 L38.1,61.6 L57.1,71.6 C57.7,71.9 58.3,72.1 59,72.1 C59.8,72.1 60.7,71.8 61.4,71.3 C62.6,70.4 63.2,68.9 63,67.4 L59.4,46.3 L74.8,31.3 C75.6,30.2 76,28.6 75.5,27.2 Z M52.1,42 C51.2,42.9 50.7,44.2 50.9,45.5 L53.5,60.7 L39.8,53.5 C39.2,53.2 38.6,53 37.9,53 C37.2,53 36.6,53.2 36,53.5 L22.3,60.7 L24.9,45.5 C25.1,44.2 24.7,42.9 23.7,42 L12.9,31.2 L28.2,29 C29.5,28.8 30.6,28 31.2,26.8 L38,13 L44.8,26.8 C45.4,28 46.5,28.8 47.8,29 L63.1,31.2 L52.1,42 Z' id=''></path></g></g></svg></li>";o+="</ul>",o+="</div>",o+="</li>",$("#MoviesList").append(o),0==s?$("#tabs ul").append('<li class="current" data-position="'+s+'"></li>'):$("#tabs ul").append('<li data-position="'+s+'"></li>')}$("#tabs li").on("click",function(){goToMovie($(this).data("position"))}),hideLoader()}),$(document).on("upcomingError",function(i,t){alert("Erreur dans la récupération des films")})});